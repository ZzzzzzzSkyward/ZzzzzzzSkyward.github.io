<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="zh-Ch">
    <title>吉卜力同人作品赏</title>
    <style>
        .pic {
            max-width: 100vw;
            max-height: 100vh;
            box-shadow: 0 0 10px black;
            margin: 5px;
            width: auto;
            height:auto;
        }

        body {
            position: relative;
        }
    </style>
</head>

<body>
    <script src="../main/zzz.js"></script>
    <script src="../main/zdata.js"></script>
    <script>
        var g = JSON.parse(zzz.fetch.ajax({
            url: "all.json",
            async: 0
        }).responseText);
        var url = "https://zzzzzzzsea.gitee.io/gallery/"

        function pic(path) {
            var pic = {
                src: path[0] ,
                name: path[1],
                element: zzz.create("img", {
                    src: url + path[0],
                    name:path[1],
                    className: "pic",
                    selected: false,
                    onclick: "this.select()",
                }, null, document.body)
            };
            pic.element.select = function () {
                if(this.selected){
                }
                else{
                    document.body.insertBefore(zzz.create("a",{href:this.getAttribute("src"),innerText:this.getAttribute("name")}),this);
                }
                this.selected=!this.selected;
            };
            return pic;
        }
        var pics = [];

        function show() {
            for (let i of g) {
                pics.push(pic(i));
            }
        }
        document.zzzloaded=show;
        show();
    </script>
</body>
